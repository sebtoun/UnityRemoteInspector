var socket = null;
try {
    socket = new WebSocket("ws://localhost:8080/api");                   
} catch (exception) {
    console.error(exception);
}

socket.onerror = function(error) {
    console.error(error);
};

socket.onopen = function(event) {
    console.log("Connexion établie.");

    this.onclose = function(event) {
        console.log("Connexion terminé.");
    };

    this.onmessage = function(event) {
        console.log("Message:", event.data);
    };

    this.send("Hello world!");
};